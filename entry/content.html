<?php

$request = $_SERVER['REQUEST_URI'];
$validated = false;

$matches = [];
if (preg_match('/^\/entry\/([^\/]+)\/$/', $request, $matches) == 1) {
  $word = urldecode($matches[1]);
  $query = 'select definition from entries where word = ?';
  $statement = $db->prepare($query);
  $statement->execute(array($word));
  $definitions = $statement->fetchAll(PDO::FETCH_COLUMN, 'definition');
  if (count($definitions) == 1) {
    $definition = $definitions[0];
    $validated = true;
  }
}

if ($validated) {
?>

<h2> <?= $word ?>: </h2>

<?php
  include "{$root}/definition.html";
} else {
?>
<p class="error"> invalid request </p>
<?php
}
?>
